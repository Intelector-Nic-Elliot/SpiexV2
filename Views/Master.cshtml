@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@{
	Layout = null;
}


<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@Model.Name()</title>


    <link rel="icon" href="/media/icwjxgxg/favicon-3.ico">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">


    
</head>


<body>

    @RenderBody()



    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Sarabun:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/css/owl.carousel.min.css" rel="stylesheet">


</body>
 @if (Model.Url().ToString().ToLower().Contains("/en-us/"))
    {
        @await Html.PartialAsync("_Requests")
    }

 @if (Model.Url().ToString().ToLower().Contains("/es/"))
    {
        @await Html.PartialAsync("_Solicitudes")
    }
@await Html.PartialAsync("_Chatbot")

<!--footer Espanol-->
@if (Model.Url().ToString().ToLower().Contains("/es/"))
{
<footer class="container-fluid bg-azul">
     <div class=" container py-5">
      <div class="row">
        <div class="col-12 col-md-4 mb-3">
               <a href="/es/"><img src="/media/lfhpqlqi/logo-blanco-cropped.png" height="40px" class="mb-3 mt-2" alt=""></a>
              <p class="text-white">Es la Secretaría de Promoción de Inversiones y  Exportaciones de la Presidencia  de la República de Nicaragua </p>
          </div>

        <div class="col-12 col-md-1 px-4 mb-3">

          </div>
  
        <div class="col-12 col-6 col-md-2 mb-3 pb-5">
          <p class="text-white spiex-p-lead">Acceso Rápido</p>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="/es/" class="nav-link p-0 text-white">Inicio</a></li>
            <li class="nav-item mb-2"><a href="/es/por-que-nicaragua" class="nav-link p-0 text-white">¿Por qué Nicaragua? </a></li>
            <li class="nav-item mb-2"><a href="/es/sectores" class="nav-link p-0 text-white">Sectores</a></li>
            <li class="nav-item mb-2"><a href="/es/servicios" class="nav-link p-0 text-white">Servicios</a></li>
            <li class="nav-item mb-2"><a href="/es/recursos" class="nav-link p-0 text-white">Recursos</a></li>
            <li class="nav-item mb-2"><a href="/es/contacto" class="nav-link p-0 text-white">Contacto</a></li>

          </ul>
        </div>
  
        <div class="col-12 col-6 col-md-2 mb-5 pb-5">
          <p class="text-white spiex-p-lead">Legal</p>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="/es/terminos-y-condiciones/" class="nav-item p-0  text-white">Términos y Condiciones</a></li>
            <li class="nav-item mb-2"><a href="/es/politicas-de-privacidad/" class="nav-link p-0 text-white">Politicas de Privacidad</a></li>

          </ul>
        </div>
  
        <div class="col-12 col-6 col-md-3 mb-3">
            <p class="text-white spiex-p-lead">Información</p>
            <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Managua, Nicaragua</a></li>
            <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Teléfono: (505) 2228-2803</a></li>
            <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Correo: info@spiex.gob.ni</a></li>
          </ul>
        </div>
        
      </div>
  
      <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
        <p class="text-white">© 2023 SPIEX, Inc. Todos los Derechos Reservados.</p>
        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
           <li><a href="https://twitter.com/SPIEX_NIC" aria-label="Visita nuestra red social twitter"><i class="bi bi-twitter ms-3 text-white spiex-p-lead"></i></a></li> 
           <li><a href=" https://www.youtube.com/investmentnicaragua" aria-label="Visita nuestro canal de youtube"><i class="bi bi-youtube ms-3 text-white spiex-p-lead"></i></a></li> 
         <li><a href="https://www.linkedin.com/company/spiex/" aria-label="visita nuestro perfil de linkedin"><i class="bi bi-linkedin ms-3 text-white spiex-p-lead"></i></a></li>    
        </ul>
      </div>
    </div>
</footer>
}

<!--footer Ingles-->
@if (Model.Url().ToString().ToLower().Contains("/en-us/"))
{
<footer class="container-fluid bg-azul">
     <div class=" container py-5">
      <div class="row">
        <div class="col-12 col-md-4 mb-3">
               <a href="/en-us/"><img src="/media/lfhpqlqi/logo-blanco-cropped.png" height="40px" class="mb-3 mt-2" alt=""></a>
              <p class="text-white">Investment Promotion and Export Office</p>
          </div>

        <div class="col-12 col-md-1 px-4 mb-3">

          </div>
  
        <div class="col-12 col-6 col-md-2 mb-3 pb-5">
          <p class="text-white spiex-p-lead">Quick Access</p>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="/en-us/" class="nav-link p-0 text-white">Home</a></li>
            <li class="nav-item mb-2"><a href="/en-us/por-que-nicaragua" class="nav-link p-0 text-white">Why Nicaragua?</a></li>
            <li class="nav-item mb-2"><a href="/en-us/sectores" class="nav-link p-0 text-white">Sectors</a></li>
            <li class="nav-item mb-2"><a href="/en-us/servicios" class="nav-link p-0 text-white">Services</a></li>
            <li class="nav-item mb-2"><a href="/en-us/recursos" class="nav-link p-0 text-white">Resources</a></li>
            <li class="nav-item mb-2"><a href="/en-us/contacto" class="nav-link p-0 text-white">Contact</a></li>

          </ul>
        </div>
  
        <div class="col-12 col-6 col-md-2 mb-5 pb-5">
          <p class="text-white spiex-p-lead">Legal</p>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="/en-us/terminos-y-condiciones/" class="nav-item p-0  text-white">Terms and Conditions</a></li>
            <li class="nav-item mb-2"><a href="/en-us/politicas-de-privacidad/" class="nav-link p-0 text-white">Privacy policies</a></li>

          </ul>
        </div>
  
        <div class="col-12 col-6 col-md-3 mb-3">
            <p class="text-white spiex-p-lead">Information</p>
            <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Managua, Nicaragua</a></li>
            <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Phone Number: (505) 2228-2803</a></li>
            <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Email: info@spiex.gob.ni</a></li>
          </ul>
        </div>
        
      </div>
  
      <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
        <p class="text-white">© 2023 SPIEX, Inc. All rights reserved.</p>
        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <a href="https://twitter.com/SPIEX_NIC"><i class="bi bi-twitter ms-3 text-white spiex-p-lead"></i></a>
            <a href="https://www.youtube.com/investmentnicaragua"><i class="bi bi-youtube ms-3 text-white spiex-p-lead"></i></a>
            <a href="https://www.linkedin.com/company/spiex/"><i class="bi bi-linkedin ms-3 text-white spiex-p-lead"></i></a>
        </ul>
      </div>
    </div>
</footer>
}
<!-- JavaScript Libraries -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" defer></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.1.1/chart.umd.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
<script src="../scripts/Solicitudes.js" type="text/javascript" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js" defer></script>
<script src="../scripts/Requests.js" type="text/javascript" defer></script>

<!-- RenderScripts -->

<!-- Template Javascript -->

<script src="/scripts/owl.carousel.min.js" defer></script>
<!--<script src="/scripts/material-kit-pro.js"></script> -->


<script src="/scripts/main.js" defer></script>



<!--Script para deshabilitar el click derecho-->

<!--<script>
    document.addEventListener("contextmenu", (e) => {
        e.preventDefault();
    });
    document.addEventListener("keydown", (e) => {
        if(e.keyCode == 123) {
            return false
        }
    })
</script> -->


<script>
    var pre= [];
    var res= [];
    
    var questions = [];
    var answers = []
   
    function Chats(){
        $.ajax({
            url: $('#chats').data('url'),
            type: 'GET',
        }).done(function(result){
          $(result).each(function(index){
            if($(this).text().includes('¿') && $(this).text().includes('?')){
                pre.push($(this).text());
            }
            
            if(!$(this).text().includes('¿') && $(this).text().includes('?')){
                questions.push($(this).text());
            }
            
            
            if(!$(this).text().includes('ingles') && $(this).text().includes('<')){
                res.push($(this).text());
            }
            
            if($(this).text().includes('ingles') && $(this).text().includes('<')){
                answers.push($(this).text());
            }
                
          })
        });
    }

    $(document).ready(function(){
        Chats();
        
    });
</script>


<!--Script para chat flotante-->
<script>
    
    // Get the modal
    var modal = document.getElementById("chatModal");
    
    // Get the button that opens the modal
    var btn = document.getElementById("btnChat");
    
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    
    // When the user clicks the button, open the modal 
    btn.onclick = function() {
      modal.style.display = "block";
    }
    
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
</script> 

<!--Chat Bot -->
<script>
    var preguntas = []
    var respuestas = []
    

    
    var currentURL = window.location.href;
        
    if (currentURL.includes("/en-us/")) {
        preguntas = questions;
        respuestas = answers;
    }
    else{
        preguntas = pre;
        respuestas = res;
    }
    function definirHora(informacion){
        var divHora = document.createElement("div");
        divHora.classList.add("d-flex", "align-items-center", "text-sm", "opacity-6");
        informacion.appendChild(divHora);
        informacion.setAttribute("style", "margin-bottom: 0;")
        var iElemento = document.createElement("i");
        iElemento.classList.add("material-icons", "text-sm", "me-1" );
        
        var currentURL = window.location.href;
        
            if (currentURL.includes("/en-us/")) {
                iElemento.innerText = "Time:";


            }
            else
            {
                iElemento.innerText = "Hora:";
            }
        divHora.appendChild(iElemento);
        var date = new Date();
            var hours = date.getHours();
            var minutes = date.getMinutes();
            
            // Check whether AM or PM
            var newformat = hours >= 12 ? 'pm' : 'am'; 
            
            // Find current hour in AM-PM Format
            hours = hours % 12; 
            
            // To display "0" as "12"
            hours = hours ? hours : 12; 
            minutes = minutes < 10 ? '0' + minutes : minutes;
                    
        var small = document.createElement("small");
        small.innerText = ' ' + hours + ':' + minutes + ' ' + newformat;
        iElemento.appendChild(small);
    }
    
    function borrarInfo(dato){
        var borrarP = document.getElementById("preguntas");
        borrarP.removeAttribute("id");
        var liAntiguos = document.querySelectorAll('li.pointer');
        liAntiguos.forEach(function(li, index){
            var borrarLi = document.getElementById("li-"+ (index + 1));
            borrarLi.remove();
        });
        var seleccionado = document.getElementById("dato");
        seleccionado.innerText = dato;
        seleccionado.removeAttribute("id");
    }
    
    function borrarInicio(){
        var comenzar = document.getElementById("inicio-consulta");
        var chatBody = document.getElementById("chat-body");
        chatBody.classList.remove("align-items-center", "justify-content-center" ,"text-center");
        comenzar.remove();
    }
    
    function posicionarScroll(){
        var div = document.getElementById('chat-body');
        div.scrollTop = '9999';
    }
    
    function bot(pregunta){
        //Div principal
        var divMain = document.createElement("div");
        divMain.classList.add("row", "justify-content-start", "mb-2");
        var div1 = document.createElement("div");
        //Div col-auto
        div1.classList.add("col-auto");
        divMain.appendChild(div1);
        var div2 = document.createElement("div");
        div1.appendChild(div2);
        //div card con gradiente azul
        div2.classList.add("card","bot-oscuro");
        var div3 = document.createElement("div");
        //div card-body
        div3.classList.add("card-body", "p-3");
        div2.appendChild(div3); 
        //Div texto
        var p= document.createElement("p");
        p.innerHTML = pregunta;
        div3.appendChild(p);
        definirHora(p);
        document.getElementById("chat-body").appendChild(divMain);
        posicionarScroll();
    }
    
    function usuario(){
        //Div principal
        var divMain = document.createElement("div");
        divMain.classList.add("row", "justify-content-end", "text-right", "mb-3", "mt-1");
        //Div col-auto
        var div1 = document.createElement("div");
        div1.classList.add("col-auto", "card-derecha", "card","text-white", "p-0");
        divMain.appendChild(div1);
        var div2 = document.createElement("div");
        //div card-body
        div2.classList.add("card-body", "p-3", "preguntas-oscuro");
        div2.setAttribute("id", "preguntas");
        div1.appendChild(div2);
        //Div texto
        var p = document.createElement("p");
        p.setAttribute("style", "margin-bottom:0;");
        p.setAttribute("id", "dato");
        p.innerText = "";
        div2.appendChild(p);
        document.getElementById("chat-body").appendChild(divMain);
        
        preguntas.forEach(function(dato, index){
            var li = document.createElement("li");
            li.classList.add("li-" + (index + 1), "pointer", "btn-style");
            li.setAttribute("id", "li-" + (index + 1));
            li.setAttribute("style", "list-style: none; padding: 5px; cursor: pointer;");
            li.innerText= dato;
            document.getElementById("preguntas").appendChild(li);
            li.addEventListener("click",function(){
                    bot(respuestas[index]);
                    borrarInfo(dato);
                    nuevaConsulta();
                    terminarConsulta();
            });
        });
    
        var informacion= document.createElement("p");
        document.getElementById("preguntas").appendChild(informacion); 
        definirHora(informacion);
        posicionarScroll();
        
    }
    
    function mensajeFinal(){
        //Div principal
        var divMain = document.createElement("div");
        divMain.classList.add("row", "justify-content-end", "text-right", "mb-3", "mt-1");
        //Div col-auto
        var div1 = document.createElement("div");
        div1.classList.add("col-auto", "bot-oscuro", "card","text-white", "p-0");
        divMain.appendChild(div1);
        var div2 = document.createElement("div");
        //div card-body
        div2.classList.add("card-body", "p-3");
        div1.appendChild(div2);
        //Div texto
        var p = document.createElement("p");
        p.setAttribute("style", "margin-bottom:0;")
        var currentURL = window.location.href;
        
            if (currentURL.includes("/en-us/")) {
                p.innerText = "Thanks for choosing us";
    

            }
            else
            {
                p.innerText = "Gracias por preferirnos";
            }
        div2.appendChild(p);
        var informacion= document.createElement("p");
        informacion.setAttribute("style", "text-align: right")
        p.appendChild(informacion); 
        definirHora(informacion);
        document.getElementById("chat-body").appendChild(divMain);
        posicionarScroll();
    }
    
    function nuevaConsulta(){
        var botones = document.createElement("div");
        botones.setAttribute("id", "botones");
        botones.classList.add("d-flex", "justify-content-center", "mt-3");
        var chatBody = document.getElementById("chat-body");
        chatBody.appendChild(botones);
        var nuevaConsulta = document.createElement("button");
        nuevaConsulta.setAttribute("id", "nuevaConsulta");
        nuevaConsulta.setAttribute("style", "margin: 0px 10px");
        nuevaConsulta.classList.add("btn","btn-success", "b-10");
        var currentURL = window.location.href;
        
            if (currentURL.includes("/en-us/")) {
                nuevaConsulta.innerText= "New Consultation";


            }
            else
            {
                nuevaConsulta.innerText= "Nueva consulta";
            }
        document.getElementById("botones").appendChild(nuevaConsulta);
        var btnNueva = document.getElementById("nuevaConsulta");
        btnNueva.addEventListener("click", usuario);
        btnNueva.addEventListener("click", borrarBotones);
        posicionarScroll();
    }
    
    function terminarConsulta(){
        var terminarConsulta = document.createElement("button");
        terminarConsulta.setAttribute("id", "terminarConsulta");
        terminarConsulta.setAttribute("style", "margin: 0px 10px");
        terminarConsulta.classList.add("btn","btn-danger", "b-10");
        
            var currentURL = window.location.href;

          if (currentURL.includes("/en-us/")) {
                terminarConsulta.innerText= "Finish Consultation";



            }
            else
            {
                terminarConsulta.innerText= "Terminar consulta";
            }
        document.getElementById("botones").appendChild(terminarConsulta);
        var btnTerminar = document.getElementById("terminarConsulta");
        btnTerminar.addEventListener("click", borrarBotones);
        btnTerminar.addEventListener("click", mensajeFinal);
        posicionarScroll();
    }
    
    function borrarBotones(){
        var bButones = document.getElementById("botones");
        bButones.remove();
        var btnTerminar = document.getElementById("terminarConsulta");
        btnTerminar.remove();
        var btnNueva = document.getElementById("nuevaConsulta");
        btnNueva.remove();
    }
    

   function iniciarConsulta(){
    borrarInicio();
    var currentURL = window.location.href;
        
            if (currentURL.includes("/en-us/")) {
                bot("Select an option to help you.");

            }
            else
            {
                bot("Selecciona una opción para brindarte ayuda.");
            }
    usuario();

    }

    var btnComenzar = document.getElementById("btnComenzar");
    btnComenzar.addEventListener("click", iniciarConsulta);  
    
    

</script>
@RenderSection("Scripts", required: false)